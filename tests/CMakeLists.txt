cmake_policy(SET CMP0079 NEW)

add_library(macros INTERFACE macros.h)
target_link_libraries(macros INTERFACE absl::statusor)
target_link_libraries(macros INTERFACE gtest)

add_executable(db_test db_test.cc)
target_link_libraries(db_test macros)
target_link_libraries(db_test db)
target_link_libraries(db_test config)
target_link_libraries(db_test absl::log)
target_link_libraries(db_test absl::strings)
target_link_libraries(db_test absl::status)
target_link_libraries(db_test gtest gtest_main)
add_dependencies(db_test copy_assets_tests)
add_test(NAME db_test COMMAND db_test)
